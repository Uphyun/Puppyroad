<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.puppyroad.app.websocket.mapper.ChatMapper">
 <!-- 채팅방 목록 조회 -->
<select id="selectRoomList">
	SELECT    room_name,
              room_id,
              recipient,
              created_date,
              chatting_type,
              sender
    FROM      chat_room
    ORDER BY  created_date
</select>
 
 <!-- 내 채팅방 목록 조회 -->
<select id="selectMyRoomList">
	SELECT    room_name,
              room_id,
              recipient,
              created_date,
              chatting_type,
              sender
    FROM      chat_room
    WHERE     recipient = #{recipient}
    OR        sender = #{sender}
    ORDER BY  created_date
</select>
 
 <!-- 채팅방 추가 -->
<insert id="insertRoom">
 	INSERT INTO chat_room(
 	                      room_name,
                          room_id,
                          recipient,
                          created_date,
                          chatting_type,
                          sender)
    VALUES(
           #{roomName},
           #{roomId},
           #{recipient},
           #{createdDate},
           #{chattingType},
           #{sender})
</insert>
  
  <!-- 채팅방 조회 -->
<select id="selectRoomInfo">
	SELECT    room_name,
              room_id,
              recipient,
              created_date,
              chatting_type,
              sender
    FROM      chat_room
    WHERE     room_id = #{roomId}
</select>
  
</mapper>